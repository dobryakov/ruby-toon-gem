require "rake"

begin
  require "rspec/core/rake_task"

  RSpec::Core::RakeTask.new(:spec)
rescue LoadError
  # RSpec not available yet; tasks will be defined after bundle install.
end

namespace :gem do
  desc "Build the toon gem"
  task :build do
    sh "gem build toon.gemspec"
  end

  desc "Build and push the toon gem to RubyGems (requires credentials)"
  task :release => :build do
    pkg = Dir["toon-*.gem"].max
    abort "No built gem found" unless pkg
    sh "gem push #{pkg}"
  end
end

task default: :spec


